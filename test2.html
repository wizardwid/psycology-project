<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Second Page</title>
</head>
<body>

<!-- 버튼들을 추가하고 각 버튼에 클릭 이벤트 리스너를 할당합니다. -->
<button id="btn1">Button 1 (1 point)</button>
<button id="btn2">Button 2 (2 points)</button>
<button id="btn3">Button 3 (3 points)</button>
<button id="btn4">Button 4 (4 points)</button>

<!-- 결과를 표시할 창 -->
<div id="result" style="display: none;">누적된 값: 0</div>

<!-- 되돌아가기 버튼 추가 -->
<button id="backButton">되돌아가기</button>

<script>
    // 초기 결과 값을 localStorage에서 가져오거나 없으면 0으로 설정
    var totalPoints = parseInt(localStorage.getItem('totalPoints')) || 0;

    // 페이지 로드 시 초기 결과 창 업데이트
    updateResult();

    // 버튼1 클릭 이벤트
    document.getElementById('btn1').addEventListener('click', function() {
        // 1점 추가
        totalPoints += 1;
        // 결과 창 업데이트
        updateResult();
    });

    // 버튼2 클릭 이벤트
    document.getElementById('btn2').addEventListener('click', function() {
        // 2점 추가
        totalPoints += 2;
        // 결과 창 업데이트
        updateResult();
    });

    // 버튼3 클릭 이벤트
    document.getElementById('btn3').addEventListener('click', function() {
        // 3점 추가
        totalPoints += 3;
        // 결과 창 업데이트
        updateResult();
    });

    // 버튼4 클릭 이벤트
    document.getElementById('btn4').addEventListener('click', function() {
        // 4점 추가
        totalPoints += 4;
        // 결과 창 업데이트
        updateResult();
    });

    // 되돌아가기 버튼 클릭 이벤트
    document.getElementById('backButton').addEventListener('click', function() {
        // 메인 페이지로 돌아가면서 누적된 값을 0으로 초기화
        window.location.href = 'main.html';
        localStorage.setItem('totalPoints', '0');
    });

    // 결과를 업데이트하는 함수
    function updateResult() {
        // 콘솔 창에 누적된 값을 출력
        console.log('누적된 값:', totalPoints);
    }

    // 새로운 창에서 누적된 값을 받는 함수
    window.addEventListener('message', function(event) {
        if (event.origin === window.location.origin) {
            totalPoints = event.data.totalPoints;
            updateResult();
            // 누적된 값이 모두 끝났을 때 0으로 초기화
            if (totalPoints === 0) {
                localStorage.setItem('totalPoints', '0');
            }
        }
    });
</script>

</body>
</html>
